<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cskaoyan.mapper.material.M_ReceiveMapper">
  <!--<resultMap id="BaseResultMap" type="com.cskaoyan.domain.Material.M_Receive">-->
  <!--&lt;!&ndash;-->
    <!--WARNING - @mbg.generated-->
    <!--This element is automatically generated by MyBatis Generator, do not modify.-->
    <!--This element was generated on Fri Dec 07 21:26:47 CST 2018.-->
  <!--&ndash;&gt;-->
  <!--<id column="receive_id" jdbcType="VARCHAR" property="receiveId" />-->
  <!--<result column="material_id" jdbcType="VARCHAR" property="materialId" />-->
  <!--<result column="amount" jdbcType="INTEGER" property="amount" />-->
  <!--<result column="receive_date" jdbcType="TIMESTAMP" property="receiveDate" />-->
  <!--<result column="sender" jdbcType="VARCHAR" property="sender" />-->
  <!--<result column="receiver" jdbcType="VARCHAR" property="receiver" />-->
  <!--<result column="note" jdbcType="VARCHAR" property="note" />-->
<!--</resultMap>-->
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Dec 07 21:26:47 CST 2018.
    -->
    receive_id, material_id, amount, receive_date, sender, receiver, note
  </sql>
  <!-- 查询所有记录 -->

    <select id="find" parameterType="com.cskaoyan.domain.Material.M_Receive" resultMap="BaseResultMap">
      SELECT
      receive_id,
      amount,
      receive_date,
      sender,
      receiver,
      material_receive.note,
      material.material_id
      FROM
      material_receive
      LEFT JOIN material ON
      material.material_id=material_receive.material_id



    <!--  order by material_receive.receive_date -->
  </select>

  <select id="selectAll" parameterType="com.cskaoyan.domain.Material.M_Receive" resultMap="BaseResultMap">
    SELECT
    receive_id,
    amount,
    receive_date,
    sender,
    receiver,
    material_receive.note,
    material.material_id
    FROM
    material_receive
    LEFT JOIN material ON
    material.material_id=material_receive.material_id
    <!--  order by material_receive.receive_date -->
    <!--  order by material_receive.receive_date -->
  </select>

  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Dec 07 21:26:47 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from material_receive
    where receive_id = #{receiveId,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Dec 07 21:26:47 CST 2018.
    -->
    delete from material_receive
    where receive_id = #{receiveId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.cskaoyan.domain.Material.M_Receive">

    insert into material_receive (receive_id, material_id, amount,
    receive_date, sender, receiver,
    note)
    values (#{receiveId,jdbcType=VARCHAR}, #{materialId,jdbcType=VARCHAR}, #{amount,jdbcType=INTEGER},
    #{receiveDate,jdbcType=TIMESTAMP}, #{sender,jdbcType=VARCHAR}, #{receiver,jdbcType=VARCHAR},
    #{note,jdbcType=VARCHAR})
  </insert>

  <insert id="insertSelective" parameterType="com.cskaoyan.domain.Material.M_Receive">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Dec 07 21:26:47 CST 2018.
    -->
    insert into material_receive
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="receiveId != null">
        receive_id,
      </if>
      <if test="materialId != null">
        material_id,
      </if>
      <if test="amount != null">
        amount,
      </if>
      <if test="receiveDate != null">
        receive_date,
      </if>
      <if test="sender != null">
        sender,
      </if>
      <if test="receiver != null">
        receiver,
      </if>
      <if test="note != null">
        note,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="receiveId != null">
        #{receiveId,jdbcType=VARCHAR},
      </if>
      <if test="materialId != null">
        #{materialId,jdbcType=VARCHAR},
      </if>
      <if test="amount != null">
        #{amount,jdbcType=INTEGER},
      </if>
      <if test="receiveDate != null">
        #{receiveDate,jdbcType=TIMESTAMP},
      </if>
      <if test="sender != null">
        #{sender,jdbcType=VARCHAR},
      </if>
      <if test="receiver != null">
        #{receiver,jdbcType=VARCHAR},
      </if>
      <if test="note != null">
        #{note,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.cskaoyan.domain.Material.M_Receive">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Dec 07 21:26:47 CST 2018.
    -->
    update material_receive
    <set>
      <if test="materialId != null">
        material_id = #{materialId,jdbcType=VARCHAR},
      </if>
      <if test="amount != null">
        amount = #{amount,jdbcType=INTEGER},
      </if>
      <if test="receiveDate != null">
        receive_date = #{receiveDate,jdbcType=TIMESTAMP},
      </if>
      <if test="sender != null">
        sender = #{sender,jdbcType=VARCHAR},
      </if>
      <if test="receiver != null">
        receiver = #{receiver,jdbcType=VARCHAR},
      </if>
      <if test="note != null">
        note = #{note,jdbcType=VARCHAR},
      </if>
    </set>
    where receive_id = #{receiveId,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.cskaoyan.domain.Material.M_Receive">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Dec 07 21:26:47 CST 2018.
    -->
    update material_receive
    set material_id = #{materialId,jdbcType=VARCHAR},
      amount = #{amount,jdbcType=INTEGER},
      receive_date = #{receiveDate,jdbcType=TIMESTAMP},
      sender = #{sender,jdbcType=VARCHAR},
      receiver = #{receiver,jdbcType=VARCHAR},
      note = #{note,jdbcType=VARCHAR}
    where receive_id = #{receiveId,jdbcType=VARCHAR}
  </update>
    <select id="SearchMaterialReceiveByMaterialId" parameterType="string" resultMap="BaseResultMap">
		SELECT
		    receive_id,
		    amount,
		    receive_date,
		    sender,
		    receiver,
		    material_receive.note,
			material.material_id
		FROM
			material_receive,
			material
		WHERE
			material.material_id=material_receive.material_id
	    AND material.material_id like CONCAT('%',#{materialId},'%' )

	</select>
  <select id="searchMaterialReceiveByReceiveId" parameterType="java.lang.String" resultMap="BaseResultMap">
	SELECT
		    receive_id,
		    amount,
		    receive_date,
		    sender,
		    receiver,
		    material_receive.note,
			material.material_id
		FROM
			material_receive,
			material
		WHERE
			material.material_id=material_receive.material_id
	    AND receive_id like CONCAT('%',#{receiveId},'%' )
	</select>
  <resultMap id="BaseResultMap" type="com.cskaoyan.domain.Material.M_Receive" >
    <id column="receive_id" property="receiveId" jdbcType="VARCHAR" />
    <result column="amount" property="amount" jdbcType="INTEGER" />
    <result column="receive_date" property="receiveDate" jdbcType="TIMESTAMP" />
    <result column="sender" property="sender" jdbcType="VARCHAR" />
    <result column="receiver" property="receiver" jdbcType="VARCHAR" />
    <result column="note" property="note" jdbcType="VARCHAR" />
    <association property="material" javaType="com.cskaoyan.domain.Material.Material">
      <id column="material_id" property="materialId" jdbcType="VARCHAR" />
      <result column="material_type" property="materialType" jdbcType="VARCHAR" />
      <result column="status" property="status" jdbcType="VARCHAR" />
      <result column="remaining" property="remaining" jdbcType="INTEGER" />
      <result column="note" property="note" jdbcType="VARCHAR" />
    </association>
  </resultMap>
</mapper>